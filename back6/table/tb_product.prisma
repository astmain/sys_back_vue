// 商品表
model tb_product {
    product_id String @id @default(cuid())
    user_id    String // 用户id    //以后要改成 author_id
    title      String @default("") // 标题
    remark     String @default("") // 备注

    // 价格
    price_type String @default("price_free") // 价格类型
    price_num  Int    @default(0) // 价格

    // 
    main_img          String  @default("") // 主图
    type_product      String  @default("model") // 商品类型
    type_check        String  @default("check_publish") // 审核
    is_publish        Boolean @default(true) // 是否上架
    type_check_remark String  @default("")

    created_at        DateTime           @default(now())
    updated_at        DateTime           @updatedAt
    arg_product_model arg_product_model? // 一对一关系
}

// 商品模型参数表
model arg_product_model {
    arg_product_model_id String     @id @default(cuid())
    // 一对一关联（外键在本表）
    product_id           String     @unique //references指向tb_product的product_id   | fields指向arg_product_model的product_id
    tb_product           tb_product @relation(references: [product_id], fields: [product_id], onDelete: Cascade, onUpdate: Cascade)
    // 判断

    is_animation   Boolean @default(false) // 是否有动画 1
    is_skeleton    Boolean @default(false) // 是否有骨骼 1
    is_print       Boolean @default(true) // 是否可打印 1
    is_no_collapse Boolean @default(true) // 未塌陷     1
    is_chartlet    Boolean @default(false) // 是否有贴图 1
    is_texture     Boolean @default(false) // 是否有材质 1

    is_business         Boolean @default(false) // 是否商用
    is_plugin           Boolean @default(false) // 是否有插件
    is_plugin_remark    String  @default("") // 插件备注
    is_copyright        Boolean @default(false) // 是否有版权
    is_copyright_remark String  @default("") // 版权备注

    // 多种价格
    price_free     Int @default(0) // 免费价格
    price_personal Int @default(0) // 个人价格
    price_company  Int @default(0) // 企业价格
    price_extend   Int @default(0) // 企业扩展价格

    // 类型
    type_format String @default("") //模型文件格式
    type_area   String @default("") // 面片数
    type_wiring String @default("") // 布线
    type_uv     String @default("") // uv

    // 列表
    list_main_img  Json @default("[]") // 主图轮播图
    list_wireframe Json @default("[]") // 线框图
    list_video     Json @default("[]") // 视频
    list_extend    Json @default("[]") // 附件
}

// 商品表
model tb_product_print_upload {
    product_print_id     String @id @default(cuid())
    user_id              String // 用户id    //以后要改成 author_id
    // ==================== 文件信息 ====================
    fileNameOriginal     String @default("") // 文件原始名
    size                 Int    @default(0) // 文件大小
    size_format          String @default("") // 文件大小格式
    url                  String @default("") // 文件url
    url_screenshot       String @default("") // 截图url
    // ==================== 解析参数 ====================
    length               Int    @default(0) // 长度
    width                Int    @default(0) // 宽度
    height               Int    @default(0) // 高度
    surface_area         Int    @default(0) // 表面积
    volume               Int    @default(0) // 体积
    complexity           Int    @default(0) // 复杂度
    structural_strength  Int    @default(0) // 结构强度
    num_faces            Int    @default(0) // 面数
    points               Int    @default(0) // 点数
    min_thickness        Int    @default(0) // 最小厚度
    thickness_proportion Int    @default(0) // 厚度比例

    // ==================== 时间 ====================
    at_created DateTime @default(now()) // 创建时间
    at_updated DateTime @updatedAt // 更新时间
}

//   "size": 1,
//   "length": 57.08331298828125,
//   "width": 87.88800048828125,
//   "height": 99.99980163574219,
//   "surface_area": 29252.025390625,
//   "volume": 214244.765625,
//   "complexity": 0.4999850438216027,
//   "structural_strength": 66864,
//   "num_faces": 66864,
//   "points": 66864,
//   "min_thickness": 3.1415,
//   "thickness_proportion": 0.4696987825670785,
//   "path_screenshot_absolute": "/app/filestore_oss/public/1/111_2025-10_24_08_22_29_139666_new.png",
//   "path_screenshot_relative": "https://server.oss.yun3d.com/oss_api/static_stream?path_static=/public/1/111_2025-10_24_08_22_29_139666_new.png",
