// 菜单表
model auth_menu {
    id          Int      @id @default(autoincrement())
    name        String   // 菜单名称
    path        String?  // 路由路径
    component   String?  // 组件路径
    icon        String?  // 图标
    sort        Int      @default(0) // 排序
    parent_id   Int?     // 父菜单ID，支持多级菜单
    level       Int      @default(1) // 菜单层级
    is_show     Boolean  @default(true) // 是否显示
    is_cache    Boolean  @default(false) // 是否缓存
    remark      String?  // 备注
    created_at  DateTime @default(now())
    updated_at  DateTime @updatedAt

    // 自关联：父菜单
    parent      auth_menu? @relation("MenuHierarchy", fields: [parent_id], references: [id])
    children    auth_menu[] @relation("MenuHierarchy")

    // 菜单权限关联
    menu_permiss auth_menu_permiss[]
}

// 菜单权限关联表
model auth_menu_permiss {
    id        Int       @id @default(autoincrement())
    auth_menu auth_menu @relation(fields: [menu_id], references: [id])
    auth_role auth_role @relation(fields: [role_id], references: [id])
    menu_id   Int
    role_id   Int

    @@unique([menu_id, role_id])
}
